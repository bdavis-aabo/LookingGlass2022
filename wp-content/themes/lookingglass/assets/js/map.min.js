var zoom,icon,center,visible;winW=window.innerWidth,winW<=576?(zoom=11.5,icon=.5,center=[-104.786435,39.471063],size=.5,visible="none"):winW>576&&winW<992?(zoom=12.5,icon=1,size=.75,center=[-104.786435,39.471063],visible="none"):(zoom=12.5,icon=1,center=[-104.786435,39.471063],size=1,visible="visible"),mapboxgl.accessToken="pk.eyJ1IjoiYnBkYXZpczgxIiwiYSI6ImNrMmc5cmE2dDAwM2UzbWtob3gwdmJveHAifQ.eOlvMW20i4FKMtQxVAni1g";var size,map=new mapboxgl.Map({container:"map",style:"mapbox://styles/bpdavis81/ckf5xsnt92evz19pcuamtqkda",zoom:zoom,center:[-104.786435,39.471063]}),lgPos=[-104.787,39.472],pulsingDot={width:size=200,height:size,data:new Uint8Array(size*size*4),onAdd:function(){var e=document.createElement("canvas");e.width=this.width,e.height=this.height,this.context=e.getContext("2d")},render:function(){var e=performance.now()%1e3/1e3,i=size/5*.2,o=size/2*.4,a=size/2*.6*e+o,t=this.context;return t.clearRect(0,0,this.width,this.height),t.beginPath(),t.arc(this.width/2,this.height/2,a,0,2*Math.PI),t.fillStyle="rgba(221, 114, 64,"+(1-e)+")",t.fill(),t.beginPath(),t.arc(this.width/2,this.height/2,o,0,2*Math.PI),t.fillStyle="rgba(230, 128, 80, 1)",t.lineWidth=2+4*(1-e),t.fill(),t.beginPath(),t.arc(this.width/2,this.height/2,i,0,2*Math.PI),t.fillStyle="rgba(255,255,255,.8)",t.fill(),this.data=t.getImageData(0,0,this.width,this.height).data,map.triggerRepaint(),!0}};map.on("load",(function(){map.resize(),map.addImage("pulsing-dot",pulsingDot,{pixelRatio:2}),map.addSource("points",{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{description:'<img src="https://livelookingglass.com/wp-content/themes/lookingglass/assets/images/lg-logo.png" alt="Looking Glass - Parker, CO" class="img-fluid" /><br/><a href="" title="Get Directions to Looking Glass" class="btn orange-btn">Get Directions</a>'},geometry:{type:"Point",coordinates:lgPos}}]}}),map.addLayer({id:"points",type:"symbol",source:"points",layout:{"icon-image":"pulsing-dot"}}),map.addSource("grocery",{type:"vector",url:"mapbox://bpdavis81.ckhl760hb0ebq22pj979ungt7-1vc46"}),map.addSource("coffee",{type:"vector",url:"mapbox://bpdavis81.ckhmke1i51hr326nuxy1b3jbo-46qhe"}),map.addSource("shopping",{type:"vector",url:"mapbox://bpdavis81.ckhmkppo00npw25odpkcdheuj-1qec3"}),map.addSource("dining",{type:"vector",url:"mapbox://bpdavis81.ckhns8o4m00on23rt93vzy7io-27xc5"}),map.addSource("trails",{type:"vector",url:"mapbox://bpdavis81.ckhnslggk06ht2ao29ul7j2nu-2hx47"}),map.addSource("parks",{type:"vector",url:"mapbox://bpdavis81.ckhnstzau06ut24o21tewea57-49id3"}),map.addSource("schools",{type:"vector",url:"mapbox://bpdavis81.ckhnx2o2l1jf02epenc9ovi12-2ua38"}),map.addSource("medical",{type:"vector",url:"mapbox://bpdavis81.ckhnxaeye06if29mnho7vj3g6-5el2w"}),map.addLayer({id:"grocery",type:"symbol",source:"grocery",layout:{visibility:visible,"icon-image":"grocery","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Grocery"}),map.addLayer({id:"coffee",type:"symbol",source:"coffee",layout:{visibility:"none","icon-image":"coffee","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Coffee"}),map.addLayer({id:"shopping",type:"symbol",source:"shopping",layout:{visibility:"none","icon-image":"shopping","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Shopping"}),map.addLayer({id:"dining",type:"symbol",source:"dining",layout:{visibility:"none","icon-image":"dining","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Dining"}),map.addLayer({id:"trails",type:"symbol",source:"trails",layout:{visibility:"none","icon-image":"trails","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Trails"}),map.addLayer({id:"parks",type:"symbol",source:"parks",layout:{visibility:"none","icon-image":"parks","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Parks"}),map.addLayer({id:"schools",type:"symbol",source:"schools",layout:{visibility:"none","icon-image":"schools","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Schools"}),map.addLayer({id:"medical",type:"symbol",source:"medical",layout:{visibility:"none","icon-image":"hospitals","icon-size":.75,"icon-allow-overlap":!0},"source-layer":"LG-Medical"})}));for(var toggleLayerIds=["grocery","coffee","shopping","dining","trails","parks","schools","medical"],i=0;i<toggleLayerIds.length;i++){var id=toggleLayerIds[i],link=document.createElement("a");link.href="#",link.className="active menu-link",link.id=id.replace(/\s+/g,"-")+"-btn",link.textContent=id,link.onclick=function(e){var i=this.textContent;e.preventDefault(),e.stopPropagation();for(var o=0;o<toggleLayerIds.length;o++)i===toggleLayerIds[o]?(layers.children[o].className="menu-link active",map.setLayoutProperty(toggleLayerIds[o],"visibility","visible")):(layers.children[o].className="menu-link",map.setLayoutProperty(toggleLayerIds[o],"visibility","none"))};var layers=document.getElementById("menu");layers.appendChild(link)}var popup=new mapboxgl.Popup({offset:35}).setHTML('<img src="/wp-content/themes/lookingglass/assets/images/map-icons/lgPos-logo.svg" alt="Looking Glass - Parker, CO Logo" class="img-fluid"><br/><a href="https://www.google.com/maps/dir//Broomtail+Trl,+Parker,+CO+80134/@39.4692191,-104.7899431,16.31z/data=!4m8!4m7!1m0!1m5!1m1!1s0x876c911b9e442ab5:0xfca2d0ec3e573f59!2m2!1d-104.7916899!2d39.4679855" title="Get Directions to Looking Glass" class="btn outline-btn" target="_blank">Get Directions</a>');map.on("click","points",(function(e){map.getCanvas().style.cursor="pointer",popup.setLngLat(lgPos).addTo(map)}));var nav=new mapboxgl.NavigationControl;map.addControl(nav,"bottom-right"),$(".map-menu .menu-link").click((function(){var e=$(this).attr("id");"grocery-btn"===e?map.fitBounds([[-104.848,39.5202],[-104.715,39.446]]):"coffee-btn"===e?map.fitBounds([[-104.822,39.5448],[-104.72,39.4542]]):"shopping-btn"===e?map.fitBounds([[-104.94,39.5957],[-104.573,39.3403]]):"dining-btn"===e?map.fitBounds([[-104.916,39.5359],[-104.704,39.3734]]):"trails-btn"===e?map.fitBounds([[-104.911,39.53],[-104.721,39.4046]]):"parks-btn"===e?map.fitBounds([[-104.913,39.5332],[-104.678,39.3577]]):"schools-btn"===e?map.fitBounds([[-104.829,39.5056],[-104.68,39.3925]]):"medical-btn"===e&&map.fitBounds([[-104.905,39.5662],[-104.726,39.4542]])})),$(window).innerWidth()<728&&map.scrollZoom.disable();